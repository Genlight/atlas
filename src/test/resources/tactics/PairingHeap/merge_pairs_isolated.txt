(match
  (w leaf)
  (match
    (let:tree:cf leaf node)
    (w{l2xy} (let:tree:cf
      app
      (match
        (ite
          (let:tree:cf node (let:tree:cf leaf node))
          (let:tree:cf node (let:tree:cf leaf node))
        )
        (ite
          (w{l2xy} (ite
            (let:tree:cf node (let:tree:cf node node))
            (let:tree:cf node (let:tree:cf node node))
          ))
          (w{l2xy} (ite
            (let:tree:cf node (let:tree:cf node node))
            (let:tree:cf node (let:tree:cf node node))
          ))
        )
      )
    ))
  )
)